name: Tell frontend there's a new version

on:
  workflow_dispatch:

jobs:
  dispatch:
    runs-on: ubuntu-latest
    steps:
      - name: Tell frontend
        uses: actions/github-script@v5
        with:
          # This is the PAT with the following permissions:
          # - READ metadata
          # - READ & WRITE workflows/actions (note: this is just the ability to trigger workflows, not the ability to read or write code)
          github-token: ${{ secrets.FRONTEND_PAT }}
          script: |
            github.actions.createWorkflowDispatch({
              owner: 'guardian',
              repo: 'frontend',
              workflow_id: 'commercial-bundle-bump.yml',
              ref: 'jlk/auto-bump-commercial-pr',
            });
